{% extends "base.html" %}
{% load staticfiles %}
{% block content %}
<div id="container-gr" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<div id="container-gr2" style="min-width: 600px; height: 400px; margin: 0 auto"></div>
<script src="{% static "js/highcharts.js" %}"></script>
{% if mv_info %}
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container-gr',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'TBMM Sandalye Paylaşımı'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: false,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ this.y +' sandalye';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                innerSize: '55%',
                name: 'Sandalye Paylaşımı',
                data: [{% for mv in mv_info %}{name: '{{mv.party}}',y: {{mv.dcount}} },{% endfor %}]
            }]
        });
    });
    
});

</script>
{% endif %}
{% if city_info %}
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container-gr2',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'TBMM Şehirlerin Vekil Sayıları'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: false,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ this.y +' vekil';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                innerSize: '55%',
                name: 'Şehirlerin Vekil Sayıları',
                data: [{% for city in city_info %}{name: '{{city.city}}',y: {{city.dcount}} },{% endfor %}]
            }]
        });
    });
    
});

</script>
{% endif %}
{% endblock %}